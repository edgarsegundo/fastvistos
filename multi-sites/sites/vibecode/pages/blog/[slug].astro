---
import { BlogService } from '../../../core/lib/multi-blog-service.js';
import '../styles/global.css';

// Get the slug from the URL
const { slug } = Astro.params;

// Get the article by slug
const article = await BlogService.getArticleBySlug(slug as string, 'fastvistos');

// If article not found, return 404
if (!article) {
  return Astro.redirect('/404');
}

const title = `${article.title} - FastVistos Blog`;
const description = article.excerpt;
---

<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="description" content={description} />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <title>{title}</title>
  
  <!-- Open Graph -->
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:type" content="article" />
  <meta property="article:published_time" content={article.publishedAt} />
  <meta property="article:author" content={article.author} />
</head>
<body class="blog-post">
  <!-- Simple Navigation -->
  <nav class="bg-white shadow-sm border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <a href="/" class="text-xl font-bold text-blue-600">FastVistos</a>
        </div>
        <div class="flex items-center space-x-8">
          <a href="/" class="text-gray-600 hover:text-blue-600 transition-colors">Home</a>
          <a href="/blog" class="text-gray-600 hover:text-blue-600 transition-colors">Blog</a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Article Header -->
  <header class="bg-white py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Breadcrumb -->
      <nav class="flex items-center text-sm text-gray-500 mb-8">
        <a href="/" class="hover:text-blue-600">Home</a>
        <span class="mx-2">→</span>
        <a href="/blog" class="hover:text-blue-600">Blog</a>
        <span class="mx-2">→</span>
        <span class="text-gray-900">{article.title}</span>
      </nav>

      <!-- Article Meta -->
      <div class="flex items-center text-sm text-gray-500 mb-6">
        <time datetime={article.publishedAt}>
          {BlogService.formatDate(article.publishedAt)}
        </time>
        <span class="mx-2">•</span>
        <span>{article.author}</span>
        <span class="mx-2">•</span>
        <span>5 min de leitura</span>
      </div>

      <!-- Title -->
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6 leading-tight">
        {article.title}
      </h1>

      <!-- Excerpt -->
      <p class="text-xl text-gray-600 mb-8">
        {article.excerpt}
      </p>

      <!-- Topics -->
      <div class="flex flex-wrap gap-2">
        {article.topics.map((topic: any) => (
          <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
            {topic}
          </span>
        ))}
      </div>
    </div>
  </header>

  <!-- Article Content -->
  <main class="py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <article class="prose prose-lg max-w-none">
        <div set:html={article.content} />
        
        <!-- Default content if no content provided -->
        {!article.content && (
          <div class="space-y-6">
            <h2>Introdução</h2>
            <p>
              Este é um artigo sobre {article.title.toLowerCase()}. Aqui você encontrará informações 
              detalhadas e atualizadas sobre o assunto.
            </p>
            
            <h2>Principais Pontos</h2>
            <ul>
              <li>Informações essenciais sobre o processo</li>
              <li>Dicas práticas e atualizadas</li>
              <li>Orientações paso a paso</li>
              <li>Documentação necessária</li>
            </ul>
            
            <h2>Conclusão</h2>
            <p>
              Para mais informações sobre este assunto, entre em contato com nossa equipe 
              de especialistas. Estamos aqui para ajudá-lo em todo o processo.
            </p>
          </div>
        )}
      </article>
    </div>
  </main>

  <!-- Related Articles -->
  <section class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">
        Artigos Relacionados
      </h2>
      <div class="grid md:grid-cols-3 gap-8">
        {[1, 2, 3].map((i) => (
          <article class="bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-md transition-shadow">
            <div class="p-6">
              <h3 class="text-lg font-semibold text-gray-900 mb-3">
                <a href="/blog/artigo-relacionado" class="hover:text-blue-600 transition-colors">
                  Artigo Relacionado {i}
                </a>
              </h3>
              <p class="text-gray-600 mb-4 text-sm">
                Descrição breve do artigo relacionado com informações relevantes.
              </p>
              <a 
                href="/blog/artigo-relacionado"
                class="text-blue-600 hover:text-blue-800 font-medium text-sm"
              >
                Ler mais →
              </a>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-blue-600">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-white mb-4">
        Precisa de Ajuda Especializada?
      </h2>
      <p class="text-xl text-blue-100 mb-8 max-w-2xl mx-auto">
        Nossa equipe está pronta para ajudá-lo com seu visto americano
      </p>
      <a 
        href="/#contato"
        class="inline-flex items-center px-8 py-3 border-2 border-white text-white font-bold rounded-lg hover:bg-white hover:text-blue-600 transition-all duration-300"
      >
        Falar com Especialista
      </a>
    </div>
  </section>

  <!-- Simple Footer -->
  <footer class="bg-gray-50 border-t">
    <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <p class="text-gray-500">© 2024 FastVistos. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>
</body>
</html>
